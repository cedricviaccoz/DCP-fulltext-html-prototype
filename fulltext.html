<div id="no-content"> This document currently holds no OCR text to be downloaded. 
</div>

<div id="progress">
  <div id="bar"></div>
  <div id="loading-text">Retrieving item metadata, please wait...</div>
</div>

<div id="fulltext-zone">

</div>

<script type="text/javascript">
	const drs_id = 2585728;
	const hasocr = true;

	//const drs_id = <%document[:drs_id]%>

	if(hasocr){
		document.getElementById('no-content').style.display = "none";
		progressBarDemo();
	}else{
		document.getElementById('no-content').style.display = "block";
		document.getElementById('progress').style.display = "none";
	}



	function updateBar(currentPage, totalPage) {
	  let bar = document.getElementById("bar"); 
	  let width = (currentPage/totalPage) * 100;
      bar.style.width = width + '%'; 
      let loadText = document.getElementById("loading-text"); 
      loadText.innerText = "Loading full text ("+ String(currentPage)+" of "+String(totalPage)+" pages)"
	}


	// both functions below only serve as a way to test the progress bar before 
	// an actual text updating module is plugged in. 
	function sleep(ms) {
	  return new Promise(resolve => setTimeout(resolve, ms));
	}

	async function progressBarDemo(){
		for(let i=0; i<=100; ++i){
			await sleep(100);
			updateBar(i, 100);
		}
	}

</script>

<style type="text/css">
#progress {
	width: 100%;
	height: 40px;
	background-color: white;
	position: relative;
	border: solid;
}

#bar {
	width: 1%;
	height: 40px;
	background-color: silver;
}

#loading-text {
	position: absolute;
	top: 10px;
	height: 20px;
	font-family: "Trueno", Helvetica, Roboto, Arial, sans-serif;
	text-align: center;
	width: 100%;
	z-index: 10;
}

</style>